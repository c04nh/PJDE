<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <link rel="stylesheet" href="./calenderStyle.css" />
    <title>calendar</title>

    <script>
        $(function(){
            var today = new Date();
            var date = new Date();           

            $("input[name=preMon]").click(function() { // 이전달
                $("#calendar > tbody > td").remove();
                $("#calendar > tbody > tr").remove();
                today = new Date ( today.getFullYear(), today.getMonth()-1, today.getDate());
                buildCalendar();
            })
            
            $("input[name=nextMon]").click(function(){ //다음달
                $("#calendar > tbody > td").remove();
                $("#calendar > tbody > tr").remove();
                today = new Date ( today.getFullYear(), today.getMonth()+1, today.getDate());
                buildCalendar();
            })


            function buildCalendar() {
                
                nowYear = today.getFullYear();
                nowMonth = today.getMonth();
                firstDate = new Date(nowYear,nowMonth,1).getDate();
                firstDay = new Date(nowYear,nowMonth,1).getDay(); //1st의 요일
                lastDate = new Date(nowYear,nowMonth+1,0).getDate();
                monthEng = ["JANUARY", "FEBRUARY", "MARCH", "APRIL", "MAY", "JUNE", "JULY", "AUGUST", "SEPTEMBER", "OCTOBER", "NOVEMBER", "DECEMBER"];

                if((nowYear%4===0 && nowYear % 100 !==0) || nowYear%400===0) { //윤년 적용
                    lastDate[1]=29;
                }

                $(".mon").text((nowMonth+1).toString().length < 2? '0' + (nowMonth+1) : (nowMonth+1));
                $(".year").text(nowYear);
                $(".mon_eng").text(monthEng[nowMonth]);

                for (i=0; i<firstDay; i++) { //첫번째 줄 빈칸
                    $("#calendar tbody:last").append("<td></td>");
                }
                for (i=1; i <=lastDate; i++){ // 날짜 채우기
                    plusDate = new Date(nowYear,nowMonth,i).getDay();
                    day = i.toString().length < 2? '0' + i : i
                    if (plusDate==0) {
                        $("#calendar tbody:last").append("<tr></tr>");
                        $("#calendar tbody:last").append("<td class='date'><button style='color: red;'>"+ day +"</button></td>");
                    }else if(plusDate==6){
                        $("#calendar tbody:last").append("<td class='date'><button style='color: blue;'>"+ day +"</button></td>");
                    }else{
                        $("#calendar tbody:last").append("<td class='date'><button>"+ day +"</button></td>");
                    }
                    
                    
                }
                if($("#calendar > tbody > td").length%7!=0) { //마지막 줄 빈칸
                    for(i=1; i<= $("#calendar > tbody > td").length%7; i++) {
                        $("#calendar tbody:last").append("<td></td>");
                    }
                }
                $(".date").each(function(index){ // 오늘 날짜 표시
                    if(nowYear==date.getFullYear() && nowMonth==date.getMonth() && $(".date").eq(index).text()==date.getDate()) {
                        $(".date").eq(index).addClass('colToday');
                    }
                }) 
            }

            buildCalendar();


        })
    </script>

</head>
<body>
    <div id="frame">
        <div id="calender_head">
            <input name="preMon" type="button" value="<">
            <div id="month">
                <div class="mon"></div>
                <div style="font-size: 19px;">
                    <div class="year"></div>
                    <div class="mon_eng" style="color: #798FBA;"></div>
                </div>
            </div>
            <input name="nextMon" type="button" value=">">
        </div>
        <table id="calendar">
            <thead>
                <tr id="day" style="height: 45px;">
                    <th style="color: red;">SUN</th>
                    <th>MON</th>
                    <th>TUE</th>
                    <th>WED</th>
                    <th>THU</th>
                    <th>FRI</th>
                    <th style="color: blue;">SAT</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</body>
</html>